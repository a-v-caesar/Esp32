//FP2 Signal sonore
#include <Arduino.h>

const int klaxon = 12; //Avertisseur sonore sur pin12 (changer si il en faut une autre)
const int activer_son = 6; //Bouton sur pin 6

//Parametres PWM
const int freq = 5000;
const int channel = 0;//Channel PWM choisi
const int resolution = 8;

const int rapport_cycl = 127;//Moitié de 255

void setup()
{
    //Configuration PWM
  ledcSetup(channel, freq, resolution);
  
  //Attacher au GPIO pour contrôler
  ledcAttachPin(klaxon, channel);
  
  //Entrees sorties
  pinMode(klaxon, OUTPUT);
  pinMode(activer_son, INPUT);
}

void loop()
{
  ledcWriteTone(channel, 5000);
  Serial.println(0);//Rapport cyclique 0, buzzer éteint
  while(activer_son == 1) //Bouton enfoncé
  {
    Serial.println(rapport_cycl);
    digitalWrite(klaxon, HIGH); //Klaxon en marche
  }

